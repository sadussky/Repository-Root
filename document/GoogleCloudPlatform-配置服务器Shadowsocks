GoogleCloudPlatform-配置服务器Shadowsocks

1. 配置防火墙规则#-------------
1.1 允许所有端口的TCP和UDP 服务， 
1.2 允许任意来源的流量 0.0.0.0/0
1.3 允许的协议和端口： tcp:0-65535;udp:0-65535

2. 配置和 申请静态IP
这个步骤可有可无。具体区别请看以下描述。
静态IP地址被分配到一个项目长期直到它们被明确地释放，并且保持附着到一个实例，即使当实例停止，直到它们被明确地分离。
临时IP地址分配给一个实例只有等到它重新启动或终止。 如果一个实例被终止或停止时，分配给该实例的任何临时的外部IP地址被释放回通用计算引擎IP地址池，成为可以使用的其他项目。 当停止实例再次启动，一个新的临时外部IP地址被分配给该实例。
直接访问 ： https://console.cloud.google.com/networking/addresses/list

或者在菜单中依次点击 【网络】–>  【外部IP地址】 –> 【保留静态IP】 ， 区域可选亚洲东部、欧洲、美国 等地。推荐亚洲！

3.创建计算引擎

直接访问 ： https://console.cloud.google.com/compute/instances
或者在菜单中依次点击 【计算引擎】–>  【创建实例】

4.命令配置 
1> 使用命令 sudo -i 切换到root 用户
2> # passwd root  //修改root密码
3> # passwd sadussky330601 //修改sadussky330601 的密码 
4> 搭建Shadow-socks？ 还是推荐秋水的一键go版本。
wget --no-check-certificate https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks-go.sh
chmod +x shadowsocks-go.sh
./shadowsocks-go.sh 2>&1 | tee shadowsocks-go.log
5> XShell连接服务器
Google Cloud 自带的SSH工具非常好用了。如果你想本地连接上去管理，也是可以的~
首先使用自动SSH连接上去，然后 sudo -i切换到 root
/** -----------------------------------------------------------------
vi /etc/ssh/sshd_config 
#修改以下内容即可
#允许密码登录 将注释去掉
PermitRootLogin yes
#修改成 yes
PasswordAuthentication no
#重启SSH即可
/etc/init.d/sshd restart
/** -----------------------------------------------------------------

6. 使用命令：
安装完成后即已后台启动 Shadowsocks-go ，运行：
/etc/init.d/shadowsocks status
可以查看 Shadowsocks-go 进程是否已经启动。
本脚本安装完成后，已将 shadowsocks-go 加入开机自启动。

使用命令：
启动：/etc/init.d/shadowsocks start
停止：/etc/init.d/shadowsocks stop
重启：/etc/init.d/shadowsocks restart
状态：/etc/init.d/shadowsocks status

多用户多端口配置文件示例：
配置文件路径：/etc/shadowsocks/config.json

多用户配置 sample：
{
"server":"0.0.0.0",
"server_ipv6": "[::]",
"local_address":"127.0.0.1",
"local_port":1080,
"port_password":{
    "8989":"password1",
    "8990":"password2"，
    "8991":"password3"
},
"timeout":300,
"method":"aes-256-cfb",
"protocol": "origin",
"protocol_param": "",
"obfs": "plain",
"obfs_param": "",
"redirect": "",
"dns_ipv6": false,
"fast_open": false,
"workers": 1
}









